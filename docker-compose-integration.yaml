version: "3"

services:
  test:
    image: elixir:1.14
    command: bash -c "cd app/ && mix local.hex --force && mix local.rebar --force && mix deps.get && mix test --warnings-as-errors"
    environment:
      - MIX_ENV=integration_test
    volumes:
      - .:/app
    links:
      - jellyfish
  jellyfish:
    extends:
      file: docker-compose-dev.yaml
      service: jellyfish
